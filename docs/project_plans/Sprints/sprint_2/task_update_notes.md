Here’s the **updated, ordered Phase-1 backlog** based on `impl-plan-p1.md`, what we’ve already authored as user stories, and what’s landed in the code so far.

| Story ID          | Title                                | Updates                                                                                                                                                                                                                                                                                                                                                                                          |
| ----------------- | ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| MP-P1-AUTH-001    | Email/GitHub Auth                    | No code yet in the excerpts. Keep as first blocker; must expose `/me` and session handling before wiring UI to protected endpoints. (Ref backlog list.)                                                                                                                                                                                                                                          |
| MP-P1-DB-002      | Baseline Schema + Indexes            | **Update:** decide **single-table + joins (PRD)** vs **header+version tables (current code)**. Current ORM has `prompts` (header: `title,tags`) + `prompt_versions` (rich fields) but is missing `owner_id`, `is_favorite`, `is_archived`. Add those + indexes; postpone join tables for tags/models or add mapping tables per PRD. Plan an Alembic migration.                                   |
| ~~MP-P1-API-003~~ | ~~Prompts CRUD API~~                 | **Already authored.** **Delta to code:** add `GET /prompts/:id`; align list filters to PRD query params (tags, favorite, archived, collection) and add pagination. Current routes: `POST /prompts`, `GET /prompts` (filters: model/provider/use\_case), `PUT /prompts/{prompt_id}` only. Also return hydrated Prompt (header + tags) consistently; add `/duplicate`, `/favorite`, `/archive`.    |
| ~~MP-P1-UI-004~~  | ~~Vault List/Grid + Cards~~          | **Already authored.** **Delta to code:** Prompts page renders cards & modal but is **not wired to API** (console log; uses context). Wire to `GET /prompts`, implement loading/empty/error states, and add favorite star & quick copy on cards.                                                                                                                                                  |
| MP-P1-ED-005      | Markdown Editor + Split Preview      | CodeEditor exists in modal and manual form. Add **split preview**, **autosave**, and **keyboard shortcuts**; hook modal “Save” to `PUT /prompts/{id}`.                                                                                                                                                                                                                                           |
| MP-P1-TAG-006     | Tags & Target Models                 | UI has **creatable** selects for `target_models` and fields for tags; ensure **lookups** are backed by API and normalize casing. Unify naming drift (`purpose` vs **`use_cases`**) across UI and API.                                                                                                                                                                                            |
| MP-P1-SRCH-007    | Search/Filter/Sort                   | Filter sheet exists but only logs. Implement context→API wiring; extend backend list to support `query,tags,favorite,archived,collection,sort`. Add DB trigram later.                                                                                                                                                                                                                            |
| MP-P1-COPY-008    | Copy Variants                        | Copy button component is present in detail modal; add **menu for variants** (body / front-matter / JSON) and payload shapes. Track copy telemetry.                                                                                                                                                                                                                                               |
| MP-P1-DUP-009     | Duplicate & Version Bump             | Backend service already tracks versions per prompt; add `POST /prompts/:id/duplicate` to create new version + UI “Duplicate” action in modal.                                                                                                                                                                                                                                                    |
| MP-P1-COLL-010    | Collections CRUD + Filter            | Implement PRD tables + endpoints (`GET/POST /collections`) and vault filter. None present in snippets.                                                                                                                                                                                                                                                                                           |
| MP-P1-IMEX-011    | Import/Export                        | Add `POST /import` (CSV/JSON + mapping UI) and `GET /export`. Ensure idempotency and field normalization.                                                                                                                                                                                                                                                                                        |
| MP-P1-TEL-013     | Telemetry + PSR                      | Add event capture for create/edit/copy/search; show PSR modal post-copy. Wire minimal dashboard later.                                                                                                                                                                                                                                                                                           |
| MP-P1-SHARE-012   | Unlisted Share (Feature-Flag)        | Add `share_tokens` table + endpoints; respect `noindex`. Ensure **feature-flag scaffolding** is in place (not shown yet in code).                                                                                                                                                                                                                                                                |
| MP-P1-NFR-014     | Perf & A11y Hardening                | Hold to PRD budgets (search p95 <150ms; list render p95 <200ms). Add axe checks to pages added above.                                                                                                                                                                                                                                                                                            |
| MP-P1-DOC-015     | OpenAPI, Data Dictionary, User Guide | Keep docs in lockstep as endpoints/UI ship; follow the story template’s docs section.                                                                                                                                                                                                                                                                                                            |

### Notes on ordering / rationale

* **DB before API before UI**: AUTH→DB→CRUD→List/UI gives us an end-to-end “create & view” path fast. (Backlog shows the same flow.)&#x20;
* We’ll **tighten naming** (`use_cases` vs `purpose`) and **field parity** between UI forms and API payloads while doing TAG-006/SRCH-007 to avoid rework. &#x20;
* The current backend already **hydrates header + version** responses; keep that contract when we add missing routes.&#x20;

If you want, I can turn any single row above into a ready-to-groom story (or split them into sprint-sized chunks).
